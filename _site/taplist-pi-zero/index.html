<!DOCTYPE html>
<html>

<head>
  <title>Taplist Pi Zero – muhwort – Homebrewer, Father, Husband, Tinker</title>

  <meta charset="utf-8" />
<meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
<meta http-equiv='X-UA-Compatible' content='IE=edge'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>


<meta name="description" content="So, if in your homebrew life, you’ve moved on past bottling (because its it f***ing terrible) and are kegging your ferments, you’ve probably already come up with some way to label or mark your taps so you know what tap is pouring what beverage.  I know there is a lot of articles out there on this topic, but, I wanted to share my experience on the matter, and hopefully, it can save you some time, and money.

" />
<meta property="og:description" content="So, if in your homebrew life, you’ve moved on past bottling (because its it f***ing terrible) and are kegging your ferments, you’ve probably already come up with some way to label or mark your taps so you know what tap is pouring what beverage.  I know there is a lot of articles out there on this topic, but, I wanted to share my experience on the matter, and hopefully, it can save you some time, and money.

" />

<meta name="author" content="muhwort" />


<meta property="og:title" content="Taplist Pi Zero" />
<meta property="twitter:title" content="Taplist Pi Zero" />

  
    






  

  <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  <link rel="stylesheet" type="text/css" href="/style.css" />
  <link rel="alternate" type="application/rss+xml" title="muhwort - Homebrewer, Father, Husband, Tinker"
    href="/feed.xml" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
  <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
</head>

<body>
  <div class="wrapper-masthead">
    <div class="container">
      <header class="masthead clearfix">
        <a href="/" class="site-avatar"><img src="https://github.com/muhwort.png?size=500" /></a>

        <div class="site-info">
          <h1 class="site-name"><a href="/">muhwort</a></h1>
          <p class="site-description">Homebrewer, Father, Husband, Tinker</p>
        </div>

        <nav>
          <a href="/">Blog</a>
          <a href="/about">About</a>
          <a href="/search">Search</a>
        </nav>
      </header>
    </div>
  </div>

  <div id="main" role="main" class="container">
    <article class="post">
  <h1>Taplist Pi Zero</h1>

  <div class="entry">
    <p>So, if in your homebrew life, you’ve moved on past bottling (because its it f***ing terrible) and are kegging your ferments, you’ve probably already come up with some way to label or mark your taps so you know what tap is pouring what beverage.  I know there is <em>a lot</em> of articles out there on this topic, but, I wanted to share my experience on the matter, and hopefully, it can save you some time, and money.</p>

<p>As you can probably tell, I’m a bit of a tech nerd, so obviously I wanted digital signage.  I mean there is several options out there to do this manually.  Tap handles with black board surfaces you can write on with chalk, or even black board spray paint, you could paint on your kegerator or keezer.  Or maybe make some other type of labels that hang on the taps or whatever.  But I didn’t want anything like that, I wanted an actual taplist.  One of the main reasons this was even remotely cost feasible for me, is I had an extra 22” LCD monitor laying around.  If you have to buy a monitor to pull this off, then this walk through probably isn’t for you, but if not here is a list of things you’ll need:</p>

<ul>
  <li><a href="https://www.amazon.com/dp/B01L3IU6XS/ref=cm_sw_em_r_mt_dp_U_ThTcDbZMH9BZH">Raspberry Pi Zero</a></li>
  <li><a href="https://www.amazon.com/dp/B0012Y2LLE/ref=cm_sw_r_tw_dp_U_x_pkTcDbVDX8D6S">MicroSD Card (8GB minimum)</a></li>
  <li><a href="https://www.amazon.com/dp/B00GF9T3I0/ref=cm_sw_r_tw_dp_U_x_ilTcDbRG7EJBP">1.2A Minimum Power Supply (basically any old cell phone charger)</a></li>
  <li><a href="https://www.amazon.com/dp/B01KRKO4MM/ref=cm_sw_r_tw_dp_U_x_LlTcDbCGQ2E0G">HDMI Cable (mini HDMI to what ever interface is on the display)</a></li>
  <li><a href="https://www.amazon.com/dp/B01HP636I4/ref=cm_sw_r_tw_dp_U_x_amTcDb197F49S">Raspberry Pi Zero Case (optional, you could also 3D print this too)</a></li>
</ul>

<p>The first time I did this, I used a Raspberry Pi 3, which is probably over kill for hardware to make a taplist, especially when all we are going to do is display a web page.  A few months ago, I need a Raspberry Pi for another project, and when I looked to buy one, they are like $30, however, at the time, I found a Raspberry Pi Zero for $5 <em>(at the time of this writing it is ~$15)</em>.  It doesn’t have near the hardware resources, but again, we are just going to be displaying a webpage.  <em>(Also, with taplist.io, you can use a kindle fire stick, I haven’t ever set it up with that, but I do know that there instructions on the product page on how to set one up.)</em>  So, lets get started.</p>

<h2 id="taplistio">taplist.io</h2>
<p>The premise of this digital taplist, uses a free product (for personal use) called <a href="https://taplist.io">Taplist.io</a>.  You will need to create an account, and from there, you can create taps, build your beverage database, create kegs, attach kegs to taps.  I’m not going to go into very much detail on this part because there is so many variables, and so much customization you can do with it.  what ever you customize under the “Look And Feel” section of your dashboard, is what will be displayed on the final product when you are finished.  The other nice part is you get an online taplist you can share with anyone (you can find mine at the bottom of this page, by clicking the “beer mug” icon).</p>

<h2 id="setting-up-the-raspberry-pi-zero">Setting up the Raspberry Pi Zero</h2>
<p>For the first part of this build, we need to install and configure the Raspberry Pi Zero, we will be installing the latest version of <a href="https://www.raspbian.org">Raspbian Stretch Lite</a>.</p>
<ol>
  <li>Download the latest img for <strong>Raspbian Stretch Lite</strong> <a href="https://www.raspberrypi.org/downloads/raspbian/">here</a>.</li>
  <li>Open the <code class="highlighter-rouge">Disk Utility</code> app:
    <ul>
      <li>Press <code class="highlighter-rouge">CMD+SPACE</code> to open the <code class="highlighter-rouge">Spotlight</code> application.</li>
      <li>In the search bar type <code class="highlighter-rouge">Disk Utility</code>.</li>
    </ul>
  </li>
  <li>In the top left had corner, select <code class="highlighter-rouge">View</code>, and be sure <code class="highlighter-rouge">Show All Devices</code> is selected.</li>
  <li>Next, you will need to be sure the SD card is formated with the <a href="https://en.wikipedia.org/wiki/Design_of_the_FAT_file_system">FAT</a> file system.
    <ul>
      <li>Select the SD drive in the left pane.</li>
      <li>Select <code class="highlighter-rouge">Erase</code> from the top.</li>
      <li>Make sure you pick <code class="highlighter-rouge">FAT (MS-DOS)</code> for the file system, and <code class="highlighter-rouge">MBR (Master Boot Record)</code> for the partition.</li>
      <li><strong>THIS WILL ERASE THE ENTIRE SD CARD, SO BE SURE YOU HAVE SAVED ANYTHING YOU WANT TO EVER SEE AGAIN!</strong></li>
    </ul>
  </li>
  <li>Open a <code class="highlighter-rouge">terminal</code> using the <code class="highlighter-rouge">Spotlight</code> tool (see step 2) and type <code class="highlighter-rouge">Terminal</code>.</li>
  <li>In the <code class="highlighter-rouge">terminal</code> application, find your disk number by running <code class="highlighter-rouge">diskutil list</code></li>
  <li>Note your disk number, it will be in the format of <code class="highlighter-rouge">/dev/disk2</code>, it may not actually be the number <code class="highlighter-rouge">2</code>, just look at the size of the disk and make sure its the correct one.</li>
  <li>Unmount the disk with <code class="highlighter-rouge">diskutil unmountDisk /dev/disk2</code>, again, replace <code class="highlighter-rouge">2</code> with number of your SD card.</li>
  <li>write the image to the SD Card with <code class="highlighter-rouge">dd</code>:
    <ul>
      <li><code class="highlighter-rouge">sudo dd bs=1m if=Downloads/raspbian-stretch-lite.img of=/dev/rdisk4 conv=sync</code></li>
      <li>Replace <code class="highlighter-rouge">Downloads/raspbian-stretch-lite.img</code> with the path to the <code class="highlighter-rouge">.img</code> file you downloaded in step 1.</li>
      <li>Again, replace <code class="highlighter-rouge">rdisk4</code> with the disk number you found in step 7.</li>
      <li>This may take some time, took my system about 10 minutes on an 8GB SD Card with a Thunderbolt SD Card Reader.</li>
    </ul>
  </li>
</ol>

<h2 id="configuring-raspbian-lite-stretch">Configuring Raspbian Lite Stretch</h2>
<p>After the img is done writing to the SD card, its time to being configuring Raspbian.  Because the Raspberry Pi Zero has such little hardware, we are going to try to keep this as minimal as possible.</p>
<ol>
  <li>SSH is disabled by default, so to enable it, you need to create an empty file called <code class="highlighter-rouge">ssh</code>:
    <ul>
      <li><code class="highlighter-rouge">touch /Volumes/boot/ssh</code></li>
    </ul>
  </li>
  <li>Next, you need to append <code class="highlighter-rouge">dtoverlay=dwc2</code> to the end of <code class="highlighter-rouge">/Volumes/boot/config.txt</code>.  You can do this either with <code class="highlighter-rouge">textEdit</code> or with a terminal editor.</li>
  <li>This next step is a little tricky, first open <code class="highlighter-rouge">/Volumes/boot/cmdline.txt</code>, and located the text <code class="highlighter-rouge">rootwait</code>, immediately after that, add a space, and then this text: <code class="highlighter-rouge">modules-load=dwc2,g_ether</code>.  So it should look like this:
    <ul>
      <li><code class="highlighter-rouge">rootwait modules-load=dwc2,g_ether</code></li>
    </ul>
  </li>
  <li>Now go ahead and eject the SD card and then load it into the Raspberry Pi Zero and plug in the power.  It will take about 60 seconds to boot up, then connect it to your computer.</li>
  <li>Next, go to <code class="highlighter-rouge">System Preferences &gt; Network</code> and you will see a new device called <code class="highlighter-rouge">RNDIS/Ethernet Gadget</code>.  <img src="/images/2019-04-26-taplist-pi-zero/network.png" alt="Network" />  This is the Raspberry Pi Zero, you can share your internet connection to it, which will then all you to SSH to the device.</li>
  <li>Go to <code class="highlighter-rouge">System Preferences &gt; Sharing</code> and enable internet sharing for the <code class="highlighter-rouge">RNDIS/Ethernet Gadget</code>. <img src="/images/2019-04-26-taplist-pi-zero/sharing.png" alt="Sharing" /></li>
  <li>You should now beable to <code class="highlighter-rouge">ssh</code> to the Raspberry Pi Zero:
    <ul>
      <li><code class="highlighter-rouge">ssh pi@raspberrypi.local</code></li>
      <li>Default password is <code class="highlighter-rouge">raspberry</code>.</li>
      <li>Type <code class="highlighter-rouge">yes</code> to accept the certificate thumbprint.</li>
    </ul>
  </li>
  <li>After you are connected, there are a few things that need to be set, run <code class="highlighter-rouge">raspi-config</code> and update the following:
    <ul>
      <li><strong>CHANGE THE DEFAULT PASSWORD</strong> else anyone can now <code class="highlighter-rouge">ssh</code> to your taplist board with the default credentials!</li>
      <li>Under <code class="highlighter-rouge">Boot Options</code> select <code class="highlighter-rouge">Desktop/CLI</code> and then select <code class="highlighter-rouge">Console Autologin</code>.</li>
      <li>Lastly configure the wifi.</li>
    </ul>
  </li>
  <li>You are now connected to your wifi, and can update the system:
    <ul>
      <li><code class="highlighter-rouge">sudo apt-get update -y</code></li>
      <li><code class="highlighter-rouge">sudo apt-get upgrade -y</code></li>
      <li><code class="highlighter-rouge">sudo apt-get dist-upgrade -y</code></li>
    </ul>
  </li>
  <li>Now, install the minimum X Server Environment for Chromium:
    <ul>
      <li><code class="highlighter-rouge">sudo apt-get install --no-install-recommends xserver-xorg x11-xserver-utils xinit openbox</code></li>
      <li><code class="highlighter-rouge">sudo apt-get install --no-install-recommends chromium-browser</code></li>
    </ul>
  </li>
  <li>You need to configure the auto start commands, and to do this, you will have to use a terminal based editor, like <code class="highlighter-rouge">nano</code> or <code class="highlighter-rouge">vi</code>.  I prefer <code class="highlighter-rouge">nano</code>:
    <ul>
      <li><code class="highlighter-rouge">sudo nano /etc/xdg/openbox/autostart</code></li>
    </ul>
  </li>
  <li>
    <p>Replace the entire contents of the file with this:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Disable any form of screen saver / screen blanking / power management
xset s off
xset s noblank
xset -dpms

# Allow quitting the X server with CTRL-ATL-Backspace
setxkbmap -option terminate:ctrl_alt_bksp

# Start Chromium in kiosk mode
sed -i 's/"exited_cleanly":false/"exited_cleanly":true/' ~/.config/chromium/'Local State'
sed -i 's/"exited_cleanly":false/"exited_cleanly":true/; s/"exit_type":"[^"]\+"/"exit_type":"Normal"/' ~/.config/chromium/Default/Preferences
chromium-browser --disable-infobars --kiosk 'https://www.taplist.io/display'
</code></pre></div>    </div>
  </li>
  <li>You need to configure X Server to autostart and boot and load the display web page.
    <ul>
      <li><code class="highlighter-rouge">nano ~/.bash_profile</code></li>
      <li>Add this to the file: <code class="highlighter-rouge">[[ -z $DISPLAY &amp;&amp; $XDG_VTNR -eq 1 ]] &amp;&amp; startx -- -nocursor</code></li>
      <li>Save and close the file.</li>
    </ul>
  </li>
  <li>Lastly shut you Raspberry Pi Zero down <code class="highlighter-rouge">sudo shutdown now</code> and go attach it to your monitor.  You do not need to attach any peripherals, on its next boot, it will autologin as the <code class="highlighter-rouge">Pi</code> user, and start up <code class="highlighter-rouge">Chromium</code> and navigate to https://www.taplist.io/display.  The very first time this boots, there will be a code on the screen that you need to go to https://taplist.io/activate and enter in.</li>
</ol>

<p>WHEW!  Thats it, hopefully you made it this far, and ended up with something like this <img src="/images/2019-04-26-taplist-pi-zero/taplist.jpg" alt="Taplist" /></p>

<p>Cheers!</p>

<hr />

<h2 id="sources">Sources</h2>
<ul>
  <li>https://brandonb.ca/raspberry-pi-zero-w-headless-setup-on-macos</li>
  <li>https://bdking71.wordpress.com/2018/11/06/setup-an-information-kiosk-using-a-raspberry-pi-zero-w/</li>
  <li>https://taplist.io/help/raspberry-pi-setup</li>
</ul>

  </div>

  <div>Tags: 
    
      
      <a href="/tag/homebrewing"><code class="highligher-rouge"><nobr>homebrewing</nobr></code>&nbsp;</a>
    
      
      <a href="/tag/raspberrypi"><code class="highligher-rouge"><nobr>raspberrypi</nobr></code>&nbsp;</a>
    
      
      <a href="/tag/keezer"><code class="highligher-rouge"><nobr>keezer</nobr></code>&nbsp;</a>
    
  </div>

  
<div class="comments">
	<div id="disqus_thread"></div>
	<script type="text/javascript">

	    var disqus_shortname = 'muhwort';

	    (function() {
	        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	    })();

	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>


  <div class="date">
    Written on April 26, 2019
  </div>
</article>

  </div>

  <div class="wrapper-footer">
    <div class="container">
      <footer class="footer">
        <!-- Add the Email icon to footer if _config.yml has the email value specified. -->


<!-- Add the Facebook icon to footer if _config.yml has the facebook value specified. -->


<!-- Add the Flickr icon to footer if _config.yml has the flickr value specified. -->


<!-- Add the GitHub icon to footer if _config.yml has the github value specified. -->

    <a href="https://github.com/muhwort" target="_blank"><i class="fab fa-github fa-lg"></i></a>


<!-- Add the Instagram icon to footer if _config.yml has the email value specified. -->

    <a href="https://instagram.com/muhwort" target="_blank"><i class="fab fa-instagram fa-lg"></i></a>


<!-- Add the LinkedIn icon to footer if _config.yml has the linkedin value specified. -->


<!-- Add the Twitter icon to footer if _config.yml has the twitter value specified. -->

    <a href="https://www.twitter.com/muhwort" target="_blank"><i class="fab fa-twitter fa-lg"></i></a>


<!-- Add the Stack Overflow icon to footer if _config.yml has the stackoverflow value specified. -->


<!-- Add the YouTube icon to footer if _config.yml has the youtube value specified. -->


<!-- Add the Reddit icon to footer if _config.yml has the reddit value specified. -->

    <a href="https://www.reddit.com/user/muhwort" target="_blank"><i class="fab fa-reddit fa-lg"></i></a>


<!-- Add the Beer icon to footer if _config.yml has the taplistio value specified. -->

    <a href="https://taplist.io/taplist-963267" target="_blank"><i class="fas fa-beer fa-lg"></i></a>


<!-- Add the Drafting Compass icon to footer if _config.yml has the thingiverse value specified. -->

    <a href="https://www.thingiverse.com/muhwort/designs" target="_blank"><i class="fas fa-drafting-compass fa-lg"></i></a>


<!-- Always add the rss feed icon. -->
<a href="/feed.xml"><i class="fas fa-rss fa-lg"></i></a>

      </footer>
    </div>
  </div>

  
<!-- Google Analytics -->
<script>
	window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;
	// ga() objects ...
	ga('create', 'UA-142482838-1', 'auto');
	ga('send', 'pageview', {
		'page': '/taplist-pi-zero/',
		'title': 'Taplist Pi Zero'
});
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


</body>

</html>
